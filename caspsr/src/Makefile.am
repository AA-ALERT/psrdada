#############################################################################
#
# Depends on 3rdparty code
#
#############################################################################

lib_LTLIBRARIES = libcaspsr.la

casper_hdr = bibob.h caspsr_def.h mulbibob.h caspsr_rdma.h 

libcaspsr_la_SOURCES = $(casper_hdr) bibob.c mulbibob.c start_observation.c

bin_PROGRAMS = bibob_terminal caspsr_udpthreaded caspsr_udpNdb caspsr_udpgen bibob_start_observation caspsr_udpNdebug caspsr_dbnum caspsr_udptester caspsr_dbdecidb


LDADD = libcaspsr.la $(top_builddir)/src/libpsrdada.la 
INCLUDES = -I$(top_srcdir)/src 
AM_CFLAGS = -D$(ARCH)

#############################################################################
#
# Depends on RDMA and Infiniband
#
#############################################################################

if HAVE_RDMACM

bin_PROGRAMS += caspsr_dbib caspsr_ibdb caspsr_pwc_ibdb

caspsr_dbib_LDADD = $(LDADD) $(RDMACM_LIBS)
caspsr_ibdb_LDADD = $(LDADD) $(RDMACM_LIBS)
caspsr_pwc_ibdb_LDADD = $(LDADD) $(RDMACM_LIBS)

endif

#############################################################################
#
# Depends on 3rd Party Timers
#
#############################################################################

if COMPILE_THIRD

bin_PROGRAMS += caspsr_udpdb caspsr_udpheader caspsr_udpNnic
libcaspsr_la_SOURCES += caspsr_udp.c caspsr_udp.h 

AM_CFLAGS += -D$(ARCH)
INCLUDES += -I$(top_srcdir)/3rdparty
LDADD += $(top_builddir)/3rdparty/libtimers.la

endif


#############################################################################
#
# Depends on PGPLOT
#
#############################################################################

if HAVE_PGPLOT

bin_PROGRAMS += mulbibob_server
AM_CPPFLAGS = @PGPLOT_CFLAGS@
mulbibob_server_LDADD = $(LDADD) @PGPLOT_LIBS@
endif

